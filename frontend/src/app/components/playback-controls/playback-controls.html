<div class="playback-controls-wrapper">
    <div class="playback-controls">
        <!-- Left Group: Manage -->
        <div class="control-group manage-group">
            <button class="control-btn manage-btn toggle-btn" (click)="toggleGrouping()"
                [attr.aria-label]="groupByArtist()() ? 'Show Albums' : 'Show Artists'">
                <mat-icon>{{ groupByArtist()() ? 'album' : 'people' }}</mat-icon>
            </button>

            <div class="separator"></div>

            <button class="control-btn manage-btn refresh-btn" (click)="doRefresh()" aria-label="Refresh">
                <mat-icon>refresh</mat-icon>
            </button>

            @if (hasQueue()) {
            <button class="control-btn manage-btn clean-btn" (click)="clearQueue()" aria-label="Clear Queue">
                <mat-icon>delete_sweep</mat-icon>
            </button>
            }
        </div>
        <!-- Play Controls Group -->
        <div class="control-group play-group">
            <div class="play-buttons">
                <button class="control-btn prev-btn" (click)="previous()" aria-label="Vorheriges">
                    <mat-icon>skip_previous</mat-icon>
                </button>

                <button class="control-btn play-btn" (click)="togglePlay()" aria-label="Play/Pause">
                    @if (!isPlayingOrBuffering()) {
                    <mat-icon class="play-icon">play_arrow</mat-icon>
                    } @else {
                    <mat-icon class="pause-icon">pause</mat-icon>
                    }
                </button>

                <button class="control-btn next-btn" (click)="next()" aria-label="Nächstes">
                    <mat-icon>skip_next</mat-icon>
                </button>

                @if (hasNextAlbum()) {
                <button class="control-btn next-album-btn" (click)="skipToNextAlbum()" aria-label="Nächstes Album">
                    <mat-icon>fast_forward</mat-icon>
                </button>
                }
            </div>
        </div>

        <!-- Volume Controls Group -->
        <div class="control-group volume-group">
            <div class="volume-buttons">
                <button class="control-btn volume-btn" (click)="volumeDown()" aria-label="Leiser">
                    <mat-icon>remove</mat-icon>
                </button>
                <mat-icon class="volume-icon">volume_up</mat-icon>
                <button class="control-btn volume-btn" (click)="volumeUp()" aria-label="Lauter">
                    <mat-icon>add</mat-icon>
                </button>
            </div>
        </div>
    </div>

    <!-- Info Banner -->
    @if (currentTrackTitle()) {
    <div class="info-banner">
        <div class="info-content">
            <span class="info-text">
                {{ currentTrackArtist() }} - {{ currentAlbumTitle() }} - {{ currentTrackTitle() }}
            </span>
        </div>
    </div>
    }
</div>